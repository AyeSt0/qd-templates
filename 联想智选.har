[{"comment":"baseinfo转换","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s={{baseinfo|urlencode}}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"info","re":".+","from":"content"}]}},{"comment":"如果baseinfo值为空取默认值","request":{"method":"POST","url":"api://util/unicode","headers":[],"cookies":[],"data":"content={{info|default('eyJpbWVpIjoiMTYzNzQ4MTc4MjQ1OTYwMTgiLCJwaG9uZWJyYW5kIjoiWGlhb21pIiwicGhvbmVNb2RlbCI6Ik1JWCAyIiwiYXBwVmVyc2lvbiI6IlY1LjEuNCIsInBob25laW5jcmVtZW50YWwiOiJWMTIuMC4xLjAuUERFQ05YTSIsIlBhZ2VJbmZvIjoiTXlJbmZvcm1hdGlvbkFjdGlvbkltcGwiLCJwaG9uZWRpc3BsYXkiOiJQS1ExLjE5MDExOC4wMDEiLCJwaG9uZU1hbnVmYWN0dXJlciI6IlhpYW9taSIsImxlbm92b0NsdWJDaGFubmVsIjoieGlhb21pIiwibG9naW5OYW1lIjoiMTU4OTM5Njg5MTIiLCJwaG9uZXByb2R1Y3QiOiJjaGlyb24iLCJzeXN0ZW1WZXJzaW9uIjoiOSIsImFuZHJvaWRzZGt2ZXJzaW9uIjoiMjgifQ==')}}"},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"状态\": \"200\"","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"baseinfo","re":"\"转换后\": \"(.*)\"","from":"content"}]}},{"comment":"解码转换baseinfo，没有baseinfo取默认值","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s={{b64decode(baseinfo)|urlencode}}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"状态\": \"200\"","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"phoneManufacturer","re":"\"phoneManufacturer\":\"(.+?)\"","from":"content"},{"name":"phoneModel","re":"\"phoneModel\":\"(.+?)\"","from":"content"},{"name":"systemVersion","re":"\"systemVersion\":\"(.+?)\"","from":"content"},{"name":"appVersion","re":"\"appVersion\":\"(.+?)\"","from":"content"},{"name":"deviceid","re":"\"imei\":\"(.+?)\"","from":"content"}]}},{"comment":"登录","request":{"method":"POST","url":"https://uss.lenovomm.com/authen/1.2/tgt/user/get?msisdn={{username|urlencode}}","headers":[{"name":"baseinfo","value":"{{baseinfo}}"},{"name":"unique","value":"{{deviceid}}"},{"name":"token","value":""},{"name":"Authorization","value":""},{"name":"User-Agent","value":"LenovoClub/4.1.2 (iPad; iOS 13.6; Scale/2.00)"}],"cookies":[],"data":"lang=zh-CN-%23Hans&source=android%3Acom.lenovo.club.app-V4.2.5&deviceidtype=mac&deviceid={{deviceid}}&devicecategory=unknown&devicevendor={{phoneManufacturer}}&devicefamily=unknown&devicemodel={{phoneModel}}&osversion={{systemVersion}}&osname=Android&password={{password}}"},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"lpsutgt","re":"<Value>(.+?)<\\/Value>","from":"content"}]}},{"comment":"登录2","request":{"method":"GET","url":"https://uss.lenovomm.com/authen/1.2/st/get?lpsutgt={{lpsutgt|urlencode}}&source=ios%3Alenovo%3Aclub%3A4.1.0&lang=zh-CN&realm=club.lenovo.com.cn","headers":[{"name":"baseinfo","value":"{{baseinfo}}"},{"name":"unique","value":"{{deviceid}}"},{"name":"token","value":""},{"name":"Authorization","value":""},{"name":"User-Agent","value":"Apache-HttpClient/UNAVAILABLE (java 1.5)"}],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"lpsutgt","re":"<Value>(.+?)<\\/Value>","from":"content"}]}},{"comment":"获取token请求原数据","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s=%7B%22sessionid%22%3A%22Lenovosso%20{{lpsutgt|urlencode}}%22%2C%22time%22%3A%22{{timestamp('int')|urlencode}}{{random(100,999,0)|urlencode}}%22%7D","headers":[],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"tokenData","re":".+","from":"content"}]}},{"comment":"aes加密","request":{"method":"POST","url":"api://util/unicode","headers":[],"cookies":[],"data":"content={{aes_encrypt(tokenData, \"nihao_liu#zh*9@7\", \"CBC\", \"A*8@Stii_jin)*%6\", output_format='hex', padding=True, padding_style='pkcs7')}}"},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"状态\": \"200\"","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"s","re":"\"转换后\": \"(.*)\"","from":"content"}]}},{"comment":"获取token","request":{"method":"GET","url":"https://api.club.lenovo.cn/users/getSessionID?s={{s|urlencode}}","headers":[{"name":"baseinfo","value":"{{baseinfo}}"},{"name":"unique","value":"{{deviceid}}"},{"name":"token","value":"{{lpsutgt}}"},{"name":"Authorization","value":"Lenovosso {{lpsutgt}}"},{"name":"User-Agent","value":"LenovoClub/4.1.2 (iPad; iOS 13.6; Scale/2.00)"},{"name":"itemid","value":"1"},{"name":"sversion","value":"0"},{"name":"X-Lenovo-APPID","value":"1"},{"name":"versionCode","value":"1000082"}],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"lenovoid","re":"\"lenovoid\":(.+?),","from":"content"},{"name":"sessionid","re":"\"sessionid\":\"(.+?)\",","from":"content"},{"name":"token","re":"\"token\":\"(.+?)\"","from":"content"},{"name":"cerpPassport","re":"\"cerp-passport\":\"(.+)\",\"cookieval","from":"content"}]}},{"comment":"获取sign请求原数据","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s=%7B%22uid%22%3A%22{{lenovoid|urlencode}}%22%2C%22imei%22%3A%22{{deviceid|urlencode}}%22%2C%22source%22%3A%220%22%2C%22sessionid%22%3A%22Lenovo%20{{sessionid|urlencode}}%22%2C%22time%22%3A%22{{timestamp('int')|urlencode}}{{random(100,999,0)|urlencode}}%22%7D","headers":[],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"signData","re":".+","from":"content"}]}},{"comment":"aes加密","request":{"method":"POST","url":"api://util/unicode","headers":[],"cookies":[],"data":"content={{aes_encrypt(signData, \"nihao_liu#zh*9@7\", \"CBC\", \"A*8@Stii_jin)*%6\", output_format='hex', padding=True, padding_style='pkcs7')}}"},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"状态\": \"200\"","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"aesSign","re":"\"转换后\": \"(.*)\"","from":"content"}]}},{"comment":"签到","request":{"method":"POST","url":"https://api.club.lenovo.cn/signin/v2/add","headers":[{"name":"baseinfo","value":"{{baseinfo}}"},{"name":"unique","value":"{{deviceid}}"},{"name":"token","value":"{{token}}"},{"name":"Authorization","value":"Lenovo {{sessionid}}"},{"name":"User-Agent","value":"Apache-HttpClient/UNAVAILABLE (java 1.5)"},{"name":"Content-Type","value":"text/json"},{"name":"itemid","value":"1"},{"name":"sversion","value":"0"},{"name":"X-Lenovo-APPID","value":"1"},{"name":"versionCode","value":"1000082"}],"cookies":[],"data":"{{aesSign}}"},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"status\":0,","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"rewardTips","re":"\"rewardTips\":\"(.+?)\",\"rewardSubTips","from":"content"},{"name":"continueCount","re":"\"continueCount\":(.+?),","from":"content"}]}},{"comment":"签到页","request":{"method":"GET","url":"https://mclub.lenovo.com.cn/sign","headers":[{"name":"Accept","value":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"},{"name":"Cookie","value":"{{cerpPassport}}"},{"name":"User-Agent","value":"Mozilla/5.0 (iPad; CPU OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148lenovoofficialapp/newversion/77D194BE-160E-4FAA-A941-32B5A43B9F5F_10215509636/versioncode-314/"},{"name":"Accept-Language","value":"zh-CN,zh-Hans;q=0.9"},{"name":"Accept-Encoding","value":"gzip, deflate, br"},{"name":"Connection","value":"keep-alive"}],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[]}},{"comment":"积分信息","request":{"method":"GET","url":"https://mclub.lenovo.com.cn/signuserinfo","headers":[{"name":"Accept","value":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"},{"name":"User-Agent","value":"Mozilla/5.0 (iPad; CPU OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148lenovoofficialapp/newversion/77D194BE-160E-4FAA-A941-32B5A43B9F5F_10215509636/versioncode-314/"},{"name":"Accept-Language","value":"zh-CN,zh-Hans;q=0.9"},{"name":"Accept-Encoding","value":"gzip, deflate, br"},{"name":"Connection","value":"keep-alive"},{"name":"Referer","value":"https://mclub.lenovo.com.cn/sign"}],"cookies":[],"data":""},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"serviceAmount","re":"\"serviceAmount\":(\\d+)","from":"content"},{"name":"userCoins","re":"\"userCoins\":(\\d+)","from":"content"},{"name":"ledou","re":"\"ledou\":\"(\\d+)\"","from":"content"}]}},{"comment":"生成日志","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s=%E7%AD%BE%E5%88%B0%E4%BF%A1%E6%81%AF%3A%E3%80%90{{rewardTips|default('签到成功')|urlencode}}%E3%80%91%20---%C2%A0%E8%BF%9E%E7%BB%AD%E7%AD%BE%E5%88%B0%EF%BC%9A%E3%80%90{{continueCount|urlencode}}%E3%80%91%5Cr%5Cn%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%EF%BC%9A%E3%80%90{{username|urlencode}}%E3%80%91%20---%20%E5%A4%A9%E5%BB%B6%E4%BF%9D%E5%88%B8%EF%BC%9A%E3%80%90{{serviceAmount|urlencode}}%E3%80%91%C2%A0---%20%E4%B9%90%E8%B1%86%EF%BC%9A%E3%80%90{{ledou|urlencode}}%E3%80%91%C2%A0---%20%E7%A7%AF%E5%88%86%EF%BC%9A%E3%80%90{{userCoins|urlencode}}%E3%80%91","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"re":".+","from":"content","name":"__log__"}]}}]